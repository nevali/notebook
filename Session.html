<!DOCTYPE html>
<html lang="en-GB"  dir="ltr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Session • Mo McRoberts | Music • Broadcasting • Technology</title>
  <link rel="stylesheet" href="https://neva.li/common/styles.css">
</head>
<body>
<header>
<h1 class="title">Mo McRoberts</h1>
<h2 class="subtitle">Music • Broadcasting • Technology</h2>
</header>
<main>
<section class="wiki">
<h1>Session</h1>
<h1 id="session">Session</h1>
<ul>
<li>Process manager, can be used privileged or unprivileged.</li>
<li>Sessions are restarted automatically when needed, including on reboot.</li>
<li>Processes are run under <a href="https://www.gnu.org/software/screen/manual/screen.html"><code>screen</code></a>, so sessions can be attached-to at any time</li>
<li>Sessions are given names (within the scope of the user)</li>
<li>As an unprivileged user, invoking with the '-g' (global) option will trigger re-execution of the command via <code>sudo</code></li>
<li>At boot-time, there are separate init-scripts for launching global versus user sessions (for different runlevels/checkpoints)</li>
<li>A user can still use <code>session</code> and have their sessions relaunch even without the init-scripts provided they can use <code>crontab</code> (and specify <code>@reboot</code> as the time)</li>
</ul>
<h2 id="examples">Examples</h2>
<h3 id="automatic-naming-of-sessions">Automatic naming of sessions</h3>
<p>The session name is derived from the initial process name, plus an increment to prevent clashes.</p>
<pre><code>$ session create bash
Session &#39;bash2&#39; started
</code></pre>
<h3 id="creating-a-suspended-session-with-a-particular-name">Creating a suspended session with a particular name</h3>
<p>The session will prompt the user to begin execution when they attach to it.</p>
<pre><code>$ session create -n backend -s /usr/local/sbin/myserver
Session &#39;backend&#39; created and suspended.
$ session attach backend
:
</code></pre>
<h3 id="process-control">Process control</h3>
<p>Processes can be suspended and resumed, restarted (killed and re-spawned), stopped (killed), and started (re-spawned).</p>
<p>Upon reboot, a session's state will be preserved: if the session was stopped, then it will not be automatically re-started.</p>
<pre><code>$ session suspend backend
$ session resume backend
$ session restart backend
$ session stop backend
$ session start backend
$ session status backend
Session &#39;backend&#39; is running, PID 46882.
</code></pre>
<h3 id="session-attributes">Session attributes</h3>
<p>Sessions have properties associated with them, which persist for as long as a session exists.</p>
<p>Note that <code>session rename</code> is an alias for <code>session set [oldname] name [newname]</code>.</p>
<pre><code>$ session set backend start-suspended yes
$ session get backend
name=backend
command=[&#39;/usr/local/sbin/myserver&#39;]
start-suspended=yes
$ session rename backend mybackend
</code></pre>
<h3 id="deleting-a-session">Deleting a session</h3>
<pre><code>$ session rm backend
The session &#39;backend&#39; is running (PID 46882). Use `session rm -f backend` to stop and delete the session.
</code></pre>
</section>
</main>
</body>
</html>
